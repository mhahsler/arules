<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Class itemMatrix --- Sparse Binary Incidence Matrix to Represent Sets
 — itemMatrix-class • arules</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">arules</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference Manual</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/mhahsler/arules/">Development Version</a>
</li>
<li>
  <a href="https://github.com/mhahsler/arules">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://michael.hahsler.net">Michael Hahsler (Maintainer)</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Class itemMatrix --- Sparse Binary Incidence Matrix to Represent Sets
</h1>
    </div>

    
    <p>The <code>itemMatrix</code> class is the basic building block
  for transactions, itemsets and rules in package <span class="pkg">arules</span>. 
  The class contains a sparse Matrix representation of items (a set of
  itemsets or transactions) and the corresponding item labels.</p>
    

        
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Sets of itemsets are represented as sparse binary matrices.
If you work with several itemMatrices at the same time (e.g.,
several transaction sets, lhs and rhs of a rule, etc.),
then the encoding (itemLabes and order of the items in the binary matrix) 
in the different itemMatrices is important and needs to conform.
See <code><a href='itemCoding.html'>itemCoding</a></code> to learn how to encode and recode itemMatrix objects.</p>
    
    <h2 class="hasAnchor" id="objects-from-the-class"><a class="anchor" href="#objects-from-the-class"></a>Objects from the Class</h2>

    <p>Objects can be created by calls of the form <code>new(&quot;itemMatrix&quot;,
    ...)</code>.
  However, most of the time objects will be created by coercion from a
  matrix, list or data.frame.</p>
    
    <h2 class="hasAnchor" id="slots"><a class="anchor" href="#slots"></a>Slots</h2>

    <p><dl class='dl-horizontal'>
    <dt><code>data</code>:</dt><dd>Object of class
      <code><a href='http://www.rdocumentation.org/packages/Matrix/topics/nsparseMatrix-classes'>ngCMatrix</a></code> 
      (from package <span class="pkg">Matrix</span>) which stores 
      item occurrences in sparse representation.  Note that the 
      <code>ngCMatrix</code> is column-oriented and <code>itemMatrix</code> is
      row-oriented with each row representing an element (an itemset, a
      transaction, etc.).  As a result, the <code>ngCMatrix</code> in this
      slot is always a transposed version of the binary incidence matrix
      in <code>itemMatrix</code>.
    </dd>
    <dt><code>itemInfo</code>:</dt><dd>a data.frame which
      contains named vectors of the length equal to the number of
      elements in the set.  If the slot is not empty (contains no item
      labels), the first element in the data.frame must have the
      name <code>&quot;labels&quot;</code> and contain a character vector with the item
      labels used for representing an item.  In addition to the item
      labels, the data.frame can contain arbitrary named vectors
      (of the same length) to represent, e.g., variable names and values
      which were used to create the binary items or hierarchical
      category information associated with each item label.  
      <!-- %This -->
      <!-- %information is used for the \code{\%in\%} method in this -->
      <!-- %class.  The subset method in associations can use this method to -->
      <!-- %select subsets of associations containing items with matching -->
      <!-- %variable or category names. -->
    </dd>
    <dt><code>itemsetInfo</code>:</dt><dd>a data.frame which may contain additional 
        information for the rows (mostly representing itemsets) in the matrix. 
        </dd>
  </dl></p>
    
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    <p><dl class='dl-horizontal'>
    <dt>coerce</dt><dd><code>signature(from = &quot;matrix&quot;, to = &quot;itemMatrix&quot;)</code>;
        expects <code>from</code> to be a binary matrix only containing 0s and 1s.</dd></p>
    <p><dt>coerce</dt><dd><code>signature(from = &quot;itemMatrix&quot;, to = &quot;matrix&quot;)</code>; coerces
      to a dense 0-1 matrix of <code>storage.mode</code> <code>&quot;integer&quot;</code> instead of 
    <code>&quot;double&quot;</code> to save memory.</dd></p>
    <p><dt>coerce</dt><dd><code>signature(from = &quot;list&quot;, to = &quot;itemMatrix&quot;)</code>;
      <code>from</code> is a list of vectors. Each vector contains one 
      set/transaction/&#8230;.</dd></p>
    <p><dt>coerce</dt><dd><code>signature(from = &quot;itemMatrix&quot;, to = &quot;list&quot;)</code>; see also
        the methods for <code>LIST</code>.</dd></p>
    <p><dt>coerce</dt><dd><code>signature(from = &quot;itemMatrix&quot;, to = &quot;ngCMatrix&quot;)</code>;
      access the sparse matrix representation. Note, the <code>ngCMatrix</code> 
      contains a transposed from of the itemMatrix.</dd></p>
    <p><dt>coerce</dt><dd><code>signature(from = &quot;ngCMatrix&quot;, to = &quot;itemMatrix&quot;)</code>;
      Note, the <code>ngCMatrix</code> has to be transposed with items as rows!</dd>
    <dt>c</dt><dd><code>signature(object = &quot;itemMatrix&quot;)</code>; combine. </dd></p>
    <p><dt>dim</dt><dd><code>signature(x = &quot;itemMatrix&quot;)</code>;
      returns the dimensions of the itemMatrix.</dd>
    <dt>dimnames, rownames, colnames</dt><dd><code>signature(x = &quot;itemMatrix&quot;)</code>;
        returns row (itemsetID) and column (item) names.</dd>
    <dt>labels</dt><dd><code>signature(x = &quot;transactions&quot;)</code>;
      returns the labels for the itemsets in each transaction 
      (see <code>itemMatrix</code>).</dd> 
    <dt>dimnames</dt><dd><code>signature(x = &quot;itemMatrix&quot;)</code>;
      returns dimnames.</dd>
    <dt>dimnames&lt;-</dt><dd><code>signature(x = &quot;itemMatrix&quot;, value = &quot;list&quot;)</code>;
      replace dimnames.</dd>
    <dt>%in%</dt><dd><code>signature(x = &quot;itemMatrix&quot;, table = &quot;character&quot;)</code>;
      matches the strings in <code>table</code> against the item labels 
      in <code>x</code> and returns a logical vector indicating if
      a row (itemset) in <code>x</code> contains <em>any</em> of the
      items specified in <code>table</code>.
      Note that there is a <code>%in%</code> method with 
      <code>signature(x = &quot;itemMatrix&quot;, table = &quot;character&quot;)</code>. This method is
      described in together with <code><a href='match.html'>match</a></code>.</dd>
    <dt>%ain%</dt><dd><code>signature(x = &quot;itemMatrix&quot;, table = &quot;character&quot;)</code>; 
        matches the strings in <code>table</code> against the item labels 
        in <code>x</code> and returns a logical vector indicating if
        a row (itemset) in <code>x</code> contains <em>all</em> of the
        items specified in <code>table</code>.</dd>
    <dt>%pin%</dt><dd><code>signature(x = &quot;itemMatrix&quot;, table = &quot;character&quot;)</code>; 
        matches the strings in <code>table</code> against the item labels 
        in <code>x</code> (using <em>partial</em> matching) and returns a 
        logical vector indicating if
        a row (itemset) in <code>x</code> contains <em>any</em> of the
        items specified in <code>table</code>.</dd>
    <dt>itemLabels</dt><dd><code>signature(object = &quot;itemMatrix&quot;)</code>;
      returns the item labels used for encoding as a character vector.</dd>
    <dt>itemLabels&lt;-</dt><dd><code>signature(object = &quot;itemMatrix&quot;)</code>;
      replaces the item labels used for encoding.</dd>
    <dt>itemInfo</dt><dd><code>signature(object = &quot;itemMatrix&quot;)</code>;
      returns the whole item/column information data.frame including
      labels.</dd>
    <dt>itemInfo&lt;-</dt><dd><code>signature(object = &quot;itemMatrix&quot;)</code>;
      replaces the item/column info by a data.frame.</dd>
    <dt>itemsetInfo</dt><dd><code>signature(object = &quot;itemMatrix&quot;)</code>;
      returns the item set/row information data.frame.</dd>
    <dt>itemsetInfo&lt;-</dt><dd><code>signature(object = &quot;itemMatrix&quot;)</code>;
      replaces the item set/row info by a data.frame.</dd>
    <dt>labels</dt><dd><code>signature(x = &quot;transactions&quot;)</code>;
      returns labels for the itemsets. The following arguments can 
      be used to customize the representation of the labels: 
      <code>itemSep</code>, 
      <code>setStart</code> and 
      <code>setEnd</code>.</dd>
    <dt>nitems</dt><dd><code>signature(x = &quot;itemMatrix&quot;)</code>; returns the number 
      of items (number in columns) in the itemMatrix.</dd>
    <dt>show</dt><dd><code>signature(object = &quot;itemMatrix&quot;)</code></dd>
    <dt>summary</dt><dd><code>signature(object = &quot;itemMatrix&quot;)</code></dd>
  </dl></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='LIST.html'>LIST</a></code>,
  <code><a href='combine.html'>c</a></code>,
  <code><a href='duplicated.html'>duplicated</a></code>,
  <code><a href='inspect.html'>inspect</a></code>,
  <code><a href='is.superset.html'>is.subset</a></code>,
  <code><a href='is.superset.html'>is.superset</a></code>,
  <code><a href='itemFrequency.html'>itemFrequency</a></code>,
  <code><a href='itemFrequencyPlot.html'>itemFrequencyPlot</a></code>,
  <code><a href='itemCoding.html'>itemCoding</a></code>,
  <code><a href='match.html'>match</a></code>,
  <code><a href='length.html'>length</a></code>,
  <code><a href='setOperations.html'>sets</a></code>,
  <code><a href='subset.html'>subset</a></code>,
  <code><a href='unique.html'>unique</a></code>,
  <code><a href='[-methods.html'>[-methods</a></code>,
  <code><a href='image.html'>image</a></code>,
  <code><a href='http://www.rdocumentation.org/packages/Matrix/topics/nsparseMatrix-classes'>ngCMatrix-class</a></code> 
  (from <span class="pkg">Matrix</span>),
  <code><a href='transactions-class.html'>transactions-class</a></code>,
  <code><a href='itemsets-class.html'>itemsets-class</a></code>,
  <code><a href='rules-class.html'>rules-class</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>set.seed</span>(<span class='fl'>1234</span>)

<span class='co'>## Generate random data and coerce data to itemMatrix.</span>
<span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>runif</span>(<span class='fl'>100000</span>)<span class='kw'>&gt;</span><span class='fl'>0.8</span>, <span class='kw'>ncol</span><span class='kw'>=</span><span class='fl'>20</span>)
<span class='fu'>dimnames</span>(<span class='no'>m</span>) <span class='kw'>&lt;-</span> <span class='fu'>list</span>(<span class='kw'>NULL</span>, <span class='fu'>paste</span>(<span class='st'>"item"</span>, <span class='fu'><a href='combine.html'>c</a></span>(<span class='fl'>1</span>:<span class='fl'>20</span>), <span class='kw'>sep</span><span class='kw'>=</span><span class='st'>""</span>))
<span class='no'>i</span> <span class='kw'>&lt;-</span> <span class='fu'>as</span>(<span class='no'>m</span>, <span class='st'>"itemMatrix"</span>)

<span class='co'>## Get the number of elements (rows) in the itemMatrix.</span>
<span class='fu'><a href='length.html'>length</a></span>(<span class='no'>i</span>)</div><div class='output co'>#&gt; [1] 5000</div><div class='input'>
<span class='co'>## Get first 5 elements (rows) of the itemMatrix as list.</span>
<span class='fu'>as</span>(<span class='no'>i</span>[<span class='fl'>1</span>:<span class='fl'>5</span>], <span class='st'>"list"</span>)</div><div class='output co'>#&gt; $`1`
#&gt; [1] &quot;item7&quot;  &quot;item10&quot; &quot;item13&quot; &quot;item15&quot; &quot;item18&quot; &quot;item20&quot;
#&gt; 
#&gt; $`2`
#&gt; [1] &quot;item5&quot;  &quot;item7&quot;  &quot;item17&quot;
#&gt; 
#&gt; $`3`
#&gt; [1] &quot;item15&quot;
#&gt; 
#&gt; $`4`
#&gt; [1] &quot;item3&quot; &quot;item8&quot;
#&gt; 
#&gt; $`5`
#&gt; [1] &quot;item1&quot;  &quot;item8&quot;  &quot;item20&quot;
#&gt; </div><div class='input'>
<span class='co'>## Get first 5 elements (rows) of the itemMatrix as matrix.</span>
<span class='fu'>as</span>(<span class='no'>i</span>[<span class='fl'>1</span>:<span class='fl'>5</span>], <span class='st'>"matrix"</span>)</div><div class='output co'>#&gt;   item1 item2 item3 item4 item5 item6 item7 item8 item9 item10 item11 item12
#&gt; 1 FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE   TRUE  FALSE  FALSE
#&gt; 2 FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE  FALSE  FALSE  FALSE
#&gt; 3 FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE  FALSE  FALSE
#&gt; 4 FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE  FALSE  FALSE  FALSE
#&gt; 5  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  FALSE  FALSE  FALSE
#&gt;   item13 item14 item15 item16 item17 item18 item19 item20
#&gt; 1   TRUE  FALSE   TRUE  FALSE  FALSE   TRUE  FALSE   TRUE
#&gt; 2  FALSE  FALSE  FALSE  FALSE   TRUE  FALSE  FALSE  FALSE
#&gt; 3  FALSE  FALSE   TRUE  FALSE  FALSE  FALSE  FALSE  FALSE
#&gt; 4  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE
#&gt; 5  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE   TRUE</div><div class='input'>
<span class='co'>## Get first 5 elements (rows) of the itemMatrix as sparse ngCMatrix.</span>
<span class='co'>## Warning: for efficiency reasons, the ngCMatrix you get is transposed!</span>
<span class='fu'>as</span>(<span class='no'>i</span>[<span class='fl'>1</span>:<span class='fl'>5</span>], <span class='st'>"ngCMatrix"</span>)</div><div class='output co'>#&gt; 20 x 5 sparse Matrix of class &quot;ngCMatrix&quot;
#&gt;        1 2 3 4 5
#&gt; item1  . . . . |
#&gt; item2  . . . . .
#&gt; item3  . . . | .
#&gt; item4  . . . . .
#&gt; item5  . | . . .
#&gt; item6  . . . . .
#&gt; item7  | | . . .
#&gt; item8  . . . | |
#&gt; item9  . . . . .
#&gt; item10 | . . . .
#&gt; item11 . . . . .
#&gt; item12 . . . . .
#&gt; item13 | . . . .
#&gt; item14 . . . . .
#&gt; item15 | . | . .
#&gt; item16 . . . . .
#&gt; item17 . | . . .
#&gt; item18 | . . . .
#&gt; item19 . . . . .
#&gt; item20 | . . . |</div><div class='input'>
<span class='co'>## Get labels for the first 5 itemsets (first default and then with </span>
<span class='co'>## custom formating)</span>
<span class='fu'>labels</span>(<span class='no'>i</span>[<span class='fl'>1</span>:<span class='fl'>5</span>])</div><div class='output co'>#&gt; [1] &quot;{item7,item10,item13,item15,item18,item20}&quot;
#&gt; [2] &quot;{item5,item7,item17}&quot;                      
#&gt; [3] &quot;{item15}&quot;                                  
#&gt; [4] &quot;{item3,item8}&quot;                             
#&gt; [5] &quot;{item1,item8,item20}&quot;                      </div><div class='input'><span class='fu'>labels</span>(<span class='no'>i</span>[<span class='fl'>1</span>:<span class='fl'>5</span>], <span class='kw'>itemSep</span> <span class='kw'>=</span> <span class='st'>" + "</span>, <span class='kw'>setStart</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>setEnd</span> <span class='kw'>=</span> <span class='st'>""</span>)</div><div class='output co'>#&gt; [1] &quot;item7 + item10 + item13 + item15 + item18 + item20&quot;
#&gt; [2] &quot;item5 + item7 + item17&quot;                            
#&gt; [3] &quot;item15&quot;                                            
#&gt; [4] &quot;item3 + item8&quot;                                     
#&gt; [5] &quot;item1 + item8 + item20&quot;                            </div><div class='input'>
<span class='co'>## create itemsets from itemMatrix  </span>
<span class='no'>is</span> <span class='kw'>&lt;-</span> <span class='fu'>new</span>(<span class='st'>"itemsets"</span>, <span class='kw'>items</span> <span class='kw'>=</span> <span class='no'>i</span>[<span class='fl'>1</span>:<span class='fl'>3</span>])
<span class='fu'><a href='inspect.html'>inspect</a></span>(<span class='no'>is</span>)</div><div class='output co'>#&gt;     items                                     
#&gt; [1] {item7,item10,item13,item15,item18,item20}
#&gt; [2] {item5,item7,item17}                      
#&gt; [3] {item15}                                  </div><div class='input'>
<span class='co'>## create rules (rhs and lhs cannot share items so I use </span>
<span class='co'>## itemSetdiff here). Also assign (random) support.</span>
<span class='no'>rules</span> <span class='kw'>&lt;-</span> <span class='fu'>new</span>(<span class='st'>"rules"</span>, <span class='kw'>lhs</span><span class='kw'>=</span><span class='fu'><a href='itemSetOperations.html'>itemSetdiff</a></span>(<span class='no'>i</span>[<span class='fl'>4</span>:<span class='fl'>6</span>],<span class='no'>i</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]), <span class='kw'>rhs</span><span class='kw'>=</span><span class='no'>i</span>[<span class='fl'>1</span>:<span class='fl'>3</span>],
  <span class='kw'>quality</span> <span class='kw'>=</span> <span class='fu'>data.frame</span>(<span class='kw'>support</span> <span class='kw'>=</span> <span class='fu'>runif</span>(<span class='fl'>3</span>)))
<span class='fu'><a href='inspect.html'>inspect</a></span>(<span class='no'>rules</span>)</div><div class='output co'>#&gt;     lhs         rhs        support
#&gt; [1] {item3,                       
#&gt;      item8}  =&gt; {item7,           
#&gt;                  item10,          
#&gt;                  item13,          
#&gt;                  item15,          
#&gt;                  item18,          
#&gt;                  item20} 0.6881455
#&gt; [2] {item1,                       
#&gt;      item8,                       
#&gt;      item20} =&gt; {item5,           
#&gt;                  item7,           
#&gt;                  item17} 0.2000279
#&gt; [3] {item9,                       
#&gt;      item17,                      
#&gt;      item18} =&gt; {item15} 0.5099691</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#details">Details</a></li>

      <li><a href="#objects-from-the-class">Objects from the Class</a></li>

      <li><a href="#slots">Slots</a></li>

      <li><a href="#methods">Methods</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    Michael Hahsler
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Michael Hahsler, Christian Buchta, Bettina Gruen, Kurt Hornik.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
